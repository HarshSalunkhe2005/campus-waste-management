<!DOCTYPE html>
<html>
<head>
    <title>Canteen Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="page-background">
    <div class="navbar">
        <div class="navbar-left">
            Canteen Dashboard: {{ canteen_name | default('My Canteen') }}
        </div>
        <div class="navbar-right">
            <a href="{{ url_for('logout') }}" class="navbar-link">Logout</a>
        </div>
    </div>

    <div class="welcome">
        <h1>Available Food Items</h1>
    </div>

    <div class="button-container" style="margin-bottom: 30px;">
        <a href="{{ url_for('add_food') }}" class="action-button">Add New Food Item</a>
        <a href="{{ url_for('manage_requests') }}" class="action-button">Manage NGO Requests</a>
        <a href="{{ url_for('file_waste_report') }}" class="action-button">File Waste Report</a>
        <a href="{{ url_for('canteen_leaderboard') }}" class="action-button">View Leaderboard</a>
    </div>

    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>Item Name</th>
                    <th>Category</th>
                    <th>Quantity</th>
                    <th>Expires At</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for food in food_items %}
                <tr class="{{ food.expiry_class }}">
                    <td>{{ food.item_name }}</td>
                    <td>{{ food.category }}</td>
                    <td>{{ food.quantity }} {{ food.unit }}</td>
                    <td>{{ food.expiry_time.strftime('%b %d, %Y at %I:%M %p') }}</td>
                    <td><span class="status-text status-{{ food.status }}">{{ food.status }}</span></td>
                    <td>
                        <a href="{{ url_for('edit_food', food_id=food.food_id) }}">Edit</a> / 
                        <a href="{{ url_for('delete_food', food_id=food.food_id) }}" onclick="return confirm('Are you sure you want to delete this item?')">Delete</a>
                    </td>
                </tr>
                {% endfor %}
                {% if not food_items %}
                <tr>
                    <td colspan="6" style="text-align: center; padding: 20px;">
                        You have no available food items. Click "Add New Food Item" to get started.
                    </td>
                </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</body>
</html>